<https://github.com/isaacs/npm/issues/1912>

Should .npmignore work like .gitignore?
No milestone
No one is assigned
Node & npm versions

$ node --version
v0.6.6
$ npm --version
1.0.106
Package structure

$ tree -a npm-ignore-test
npm-ignore-test
├── .npmignore
├── dir-to-be-ignored
│   └── foo.txt
└── package.json
1 directory, 3 files
$ cat npm-ignore-test/package.json 
{
  "name": "npm-ignore-test",
  "version": "1.0.0"
}
Prefix slash - git will only ignore dir in repo root. Seems to have no effect in npm

$ echo "/dir-to-be-ignored" > npm-ignore-test/.npmignore 
$ npm pack npm-ignore-test && tar -zxvf npm-ignore-test-1.0.0.tgz 
./npm-ignore-test-1.0.0.tgz
x package/.npmignore
x package/package.json
x package/dir-to-be-ignored/foo.txt
No slash - git will ignore matching dirs anywhere in repo, also appears to be ignored by npm

$ echo "dir-to-be-ignored" > npm-ignore-test/.npmignore 
$ npm pack npm-ignore-test && tar -zxvf npm-ignore-test-1.0.0.tgz 
./npm-ignore-test-1.0.0.tgz
x package/.npmignore
x package/package.json
x package/dir-to-be-ignored/foo.txt
Trailing slash - npm will ignore a directory when it sees a trailing slash

$ echo "dir-to-be-ignored/" > npm-ignore-test/.npmignore 
$ npm pack npm-ignore-test && tar -zxvf npm-ignore-test-1.0.0.tgz 
./npm-ignore-test-1.0.0.tgz
x package/.npmignore
x package/package.json



Can you try with npm 1.1.13 and see if this problem still exists? Thanks.


Sweet, this problem is gone.

Now that npm processes these globs the same way git does I can just delete the .npmignore files in my packages and let npm use the .gitignore file.

One small thing (let me know if you want a separate issue opened for this) - when packaging using just a .gitignore file, npm seems to convert it to an .npmignore file and then include it with the package. Is this the intended behavior? I always had my .npmignore file exclude itself as I can't think of any way it could be useful in a package.

Yes, this is intended behavior. The reason is that if you install a package into node_modules, and then want to check it into git, you can end up ignoring important files (eg, .js files generated by coffeescript or something.)

Ok cool, thanks for the explanation. I'll leave the .npmignore files in
